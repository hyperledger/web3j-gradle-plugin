language: java
jdk:
- openjdk8
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: skip
test: skip
jobs:
  include:
  - stage: build snapshot
    if: branch = master
    script: "./gradlew check jacocoTestReport release -PossrhRepoUrl=${SNAPSHOT_OSSRH_REPO_URL}"
  - stage: build release
    if: branch =~ /release/
    script: "./gradlew check release -Pversion=${TRAVIS_BRANCH#'release/'} -PossrhRepoUrl=${RELEASE_OSSRH_REPO_URL}"
after_success:
- bash <(curl -s https://codecov.io/bash)
env:
  global:
  - SNAPSHOT_OSSRH_REPO_URL: https://oss.sonatype.org/content/repositories/snapshots/
  - RELEASE_OSSRH_REPO_URL: https://oss.sonatype.org/service/local/staging/deploy/maven2
  - secure: nJJxFppvZL84NGo4ZXQOu2tIbuG+V4FweGIDW9CPDnpdR8731l7mOSs/tDtszQPXwr24Ksz7kKWMoAtukgqm+S8MP9Zg8mxQab3EUkiFjVeMyEXbHKqculfHnsHnbARqRkD1VXcMjQGi62nsz4a+U1VNPa/94l610hjPNok51ClOeozQ+XedxT8Bc+EkIM2pwB8SAyQ406IaA2sD/81lM4Almxt0LCurCBc/5xNAZ655vyoNcoBVw9gdlB/gcBzoaziyWknn445+fXFzaUcUaeiB1SCuZ00ohbMctiJ1lUuEBt/3Axwb91r/vvazg6yFeKDtAHLxYH4TlQmun3q8QG6WtREIgQSnvOU/yX/PGdmqQObzl1tAxh3KoLJHoTvANmhaA9DNPjqJFOXJHyUeOjYd0O56tiQ6/i1+obDa2XkdHjnbhgvcoHB3pR/qF6ufZ7oEUI1bllZSrBShHRR8koQzJhpObsYfwxyKbero9j8xCBNDukfYepO53NkDearlc6HXxkJE2eh6ygo231s0j7cqNDeNN7SCHpLzCsS4lf6dQoXBo9Omy7RKzhWZKCWqVB6GqyU3Bq18AuR2egzCH2xlGbnInd+lm+xNNj1kbW9wGEk3YdRefilGShjnagmE1jLB8uTtNwujyEQuvF0ph1r6CO/LkTlfT1248eyAYoo=
  - secure: fComXPUTQZWNUB7z902yjJ/95EA9/+rx5+w4ofh6iIxKxm5MhGdWQT8BJ3fHeFNmAZh5ClIOhw4rmfd6TM3uZxnlqWk+PNGbdlrzZkZyzOQR9rxv6y1YxjL0dDIIZHJ9yBDZ4zUIYv3RwjOagYAgdUlvxP3HTWMEgTNuxfNV2Z/VNN1Ll6l0VmAlno+b2lVxlFce7+He5qtCdPQ/ihq1xAZYwUo8uSY3PQ2B0xP0lChvLFLn4/2pPSl6tsLiAS68rxbDT02vECZ+tXzTJJ+9XdtQ1lrIGmhJAzggZFsAhOzQ+lAl48d+NjVBttILKJW0HEHGOQwzh4bAsHNfHdwLoHzzNhE9DWklg/HLDV5PMgv3W34WH6JhqIrEXbS0pqFA8wT2Qj0YXAhjkDuU9tYXW8eYAdQ4EeuEHy1iCPe3uhKfgJGxN+lU3KCz19qAyKz1Oosx+HPxjSD2xTmu1NTjBlX3tCjiuvHwJSeYGwLVLSlzpuy8qZrQ9bVqCCxD2ur3Ypl4ysQoEUCQslPYPJcWPQ6PCGlTF++0n9jevAU+wvlstD7HdrirRXsk8grhMBHHm/xlrMGsW/H5J5KwTsUwHw4o8THQ3utnrhTTuA8O6ND51gP7fDirTqoqGFHzfK76mzAsSvlEUiu1NRU0nCv1mEDlo0AS78jSQ4Ob6J+D/Xc=
  - secure: ecvoT33QOYWpnvachNLpKw0BNZCvaQtz8B8tG69SyhjBo0F6IpytJ8T4XJjNAluQ4h3RNsAy5ACSppKbgCpYxZhdiGW7J3hntxk5O6JrwsNdl9sVu8MXGeWJrZF4Y1xv9wY5/Xj816N+XSeXLK20hkrB6luyrEbcT70sFcCG051lJ34d4Ib0uKa5ArzdHW1/tHbeySdYitBTT3Wlr+oV7awxpJ/U9W7DofSctwmvq+cP6T85v4P5HM16bgIwJ2gEA1ofJ6apsyc/Qyk4rs6BzhQMn1+ldtEoX6vgZQ3I8zuy/KGKYR65WKuj9Q3SDb7Smb01Xl3N73EcGgU3VAHFocB3Wh7kAy513mGzi2T7nCOTqAYUMh1BjsV+/CTPvviTAjy0aRPs0QAG+30o3IFUDYp9K9HgGTupEobau6H6TBhaUAn5f0IhJyRkhnwezTR3N8aW4bGNqdDJ6egZGo85iC4jsVjEsLVbQatn1OHAaMvw01X8qR2bagLgzLRtDQenN5brq46MXaFbyy0OcdvLSlrREyPLbHYkWvnLwaSdtEmXEupqD1xnYdGFUiw6lHGDnBRaudJqSTDCnLaEvD2UCs6n/Q3h7Y8ow9Iv/m3OofAzzxZWBSiR0oiMbZO97MgvNESRk5WP12Q1EKTlqeuRQMkSEUKlUdHZxEn26lZVCt8=
  - secure: Ldzm4Gisv0vfY7DCj2aLinqhXD+6ljb/ArAZRE8cM+OZMrodfCOFz8ZzGC9Dll/Z4er+6b75FSE0XAuU19wJkUN0xiSBPJM1md+G8XcnXLL8So5J+nkfe3RfZ4co7uFGNGaqa3a9B14Dds9iGStoBxvemgRH+Wn8/jw6G+hBx1p0n8u7ZfMXlwgnrWjyhMstZwDytKyaCSrdBokhHcaC4AV46I0TYg2EbjJ/cBm9e9YWdRP5OknsNXyVuFDhyHs7rBB3abiuKdtVDD3ybsMIrJ4OTRPNBfp5sD0DtkcYmdw1JH/JWCn9DEZDZh7IE9EO+A0DGG08Pv2QnPYQn2JFD8pYB/Uybo38yX//s6qknJJBH8zKCmi8IxOLz9DhnRpW5rwfKc4qwTtB8qCfonBR9bGKSFG/pTtjI3LQAqhWw1dYszDzmlrUNVJ8yNKSt1jmDd1pyxsWYG65Wk7Z8v8ATBiuZYg3Vg8IR+T4tZ72xAyZu+TUw0/gAY7Ais0g2OVMcwTr41D0Vg3iNcqmr8TY0tVtvsUNDpSu4mF83FNGfQCBzAbf9tLhmmhzk91us3sfrYcXjRLX+uQdw5OQB2IP16XUbV2zOczJcaN6TmgUsuxC8CVy82n2z28qEq3h55C81MQKDLjEki/oB6d+TnSVKKLibG4iIe0uNjxloucuWI4=
  - secure: uhRp24gmoeXOCBw5/DDTy0U9bKiPwktaDhZ5ituHEp9Io4734A1FJuQa98HF6MaebzDJl8kKP+zpbihl2WPIocoSRheEX9Mn8NAFiGJrSDAr1/Ir44M+Zq1WUyekV0dBeDAYIqz6JTSrVQGgH8POUxJfq3C9IUePJRwQnI6ijZ6FFJaCpup34gjQgQXmlG7ylLsLsrM5xABfvp/VuX2EnPw640Nta4OaNM8b91/pqv/RqEqT81VuStKVUnba9WHM0d6s8vZgUrVqsMmfSxM/LeMpJotRUlBEaYGr/pBWJcgH4fSMbn0GxB3PaFyF4/lyOwCvUE8Y4qp6yMWRNIu9Nk6U7bC3z6/+x/T1N/nCEwLBzLB8uxsGCyyufVnAz9EUUMSv4rFEWT4ShYJTkDytAqwZZjQKvULtHdZ8SDJvsQarM2F4krDPcH+5Mr8WUhpO4+zJAyZ48cCdzgUJFtTpBaeInU6G4nIo3Xza3aej5j8wBebLuFu0XSk8W/PGkGGhUY9KEAmnKtjo+PRglMMysZEOm6iUyip039inpbSJV6NzlE2dvVL5ZxSZcdmWocwl8SLTPcQvdjM99hI5npwhhN0o6EKN6oKo44vv0GsDlPNDLAc8yzl117VeQ2/nJX3pn+CxQxxAm+5ooow7Xr/ucoZBeG4kwXCQeV+ebjQIq3Q=
  - secure: FHuEVXH+xoZRBgMGDY1fl5+oZY0XjTSY48PTfLJ6XufAzSWGdrF+scD0J45ncsD2BUiogEkecNZQxlg9YXVZs7oPYV/RlSuS7veiqUCAiJ2feDC9zdvQhBQftyeLCdFO/VQI4WNyOH3TvMAXuGwhetUzLv2laSboWHokxooO56Cu8a82cRAYn8NyayroCE7ORQvpallfJY+OEM9Q2vXFGNefqsuy48UItSSl9tVRteviDbETBrRjx7AqbJiXY4YBkZxM4ybEPtAVxio5neEoqRQk659bATXv1LuIo6kSL8xTp1//s/vGmVnwkL4OfSPmq/uOLMmpqajsPEGJebYRDwcuHuMeAAvL7Qk/rsQAckSOtiPS8L0QI8VlucQVQ+RRFsHxWlVdaBs4BfBZrC0cGQgZTieUVrfEIYpaOYRqkpfFNGTp758esUcchK1C4RvQvchzAnvIXcdL711GhF46bMG1i1seTKddyAo4okbeTF3zq4qq5vaxlncDA4nuKOkIcr2b3RkmDjYPL/IGD9hTm79E7qAQBlPx3XH/8n5Uecrs+dQCHFL6cPd5d2wdwBfNPglDcPYMUMu+vdMCPmdMia7/bf2waGHTXIwlX3oYMbb3AMJs26K5ZzPKXXaUgxsw/wU4Le1vNbjNiYd8GLSu3FWnTp6VNeFJUb8AoJru7ME=
